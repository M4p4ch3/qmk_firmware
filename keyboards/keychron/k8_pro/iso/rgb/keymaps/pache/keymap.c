/*
Copyright 2020 Dimitris Mantzouranis

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 2 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
#include QMK_KEYBOARD_H

#include "keymap_french.h"
#include "custom_key.h"

// Key codes
//   Double transparent
#define KC_2TR _______, _______
//   Leading transparent one
#define KC_L_(kc) _______, kc
//   Trailing transparent one
#define KC_T_(kc) kc, _______
//   Direct circ character
#define KC_DCIR RALT(KC_9)

// Key placeholder
//   Space
#define K_SPC(kc) KC_NO, KC_NO, KC_NO, kc, KC_NO, KC_NO, KC_NO
//   F12
#define K_F12 KC_F12, KC_NO

enum layer_names {
    // Standard
    // Startup layer for Mac dip switch position
    // Doesn't allow access to upder layers
    // Features as few changes as possible from default keymap :
    // - ^2 updated to <> as missing in azerty keymap on ANSI layout
    // - CapsLock disabled
    L_STD,
    // Extension from standard
    // Startup layer for Windows dip switch position
    // Allows access to upper layers
    // Features minor changes from standard layer :
    // - ^ updated from mod to direct character
    L_EXT,
    // Symbols, including numbers
    L_SYM,
    // Navigation
    L_NAV,
    // Numpad
    L_NUM,
};

// Custom keycode, aliased to macro ones as not used
#define KCC_BR      MC_0
#define KCC_CBR     MC_1
#define KCC_SBR     MC_2
#define KCC_MNPL    MC_3
#define KCC_EQEQ    MC_4
#define KCC_MLDV    MC_5
#define KCC_BSMD    MC_6
#define KCC_APPP    MC_7
#define KCC_QTDQ    MC_8
#define KCC_PLMN    MC_9
#define KCC_SLBS    MC_10

const custom_key_t custom_key_list[] = {
    // BRackets ()
    {KCC_BR,    FR_LPRN,    FR_RPRN},
    // Curly BRackets {}
    {KCC_CBR,   FR_LCBR,    FR_RCBR},
    // Square BRackets []
    {KCC_SBR,   FR_LBRC,    FR_RBRC},
    // MiNus PLus -+
    {KCC_MNPL,  FR_MINS,    FR_PLUS},
    // EQual EQual ==
    // Equal as shifted symbol to allow += by rollover w/o unshifting
    {KCC_EQEQ,  FR_EQL,     FR_EQL},
    // MuLt DiV */
    {KCC_MLDV,  FR_ASTR,    FR_SLSH},
    // BaskSlash MoDulo \%
    {KCC_BSMD,  FR_BSLS,    FR_PERC},
    // AmPerand PiPe &|
    {KCC_APPP,  FR_AMPR,    FR_PIPE},
    // QuoTe DualQuote
    {KCC_QTDQ,  FR_QUOT,    FR_DQUO},
    // PLus MiNus +-
    {KCC_PLMN,  FR_PLUS,    FR_MINS},
    // SLash BackSlash /\ */
    {KCC_SLBS,  FR_SLSH,    FR_BSLS},
};

const uint8_t CUSTOM_KEY_NB = sizeof(custom_key_list) / sizeof(custom_key_t);

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] =
{
    [L_STD] = LAYOUT_tkl_iso(
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ESC    |        | F1     | F2     | F3     | F4     |    | F5     | F6     | F7     | F8     |   | F9     | F10    | F11    | F12    |  | PSCR   | CORT   | RGB    |
            KC_ESC,           KC_F1,   KC_F2,   KC_F3,   KC_F4,        KC_F5,   KC_F6,   KC_F7,   KC_F8,       KC_F9,   KC_F10,  KC_F11,  KC_F12,     RGB_TOG, RGB_MOD, KC_NO,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ^2     | &1     | é2~    | "3#    | '4{    | (5[    | -6|    | è7`    | _8\    | ç9^    | à0@    | )°]    | =+}    | BACKSP          |  | INS    | HOME   | PGUP   |
            FR_LABK, KC_1,    KC_2,    KC_3,    KC_4,    KC_5,    KC_6,    KC_7,    KC_8,    KC_9,    KC_0,    FR_RPRN, FR_EQL,  KC_BSPC,             KC_INS,  KC_HOME, KC_PGUP,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | TAB       | A      | Z      | E      | R      | T      | Y      | U      | I      | O      | P      | ^¨     | $£     | RETURN       |  | DEL    | END    | PGDN   |
            KC_TAB,     FR_A,    FR_Z,    KC_E,    KC_R,    KC_T,    KC_Y,    KC_U,    KC_I,    KC_O,    KC_P,    FR_CIRC, FR_DLR,                    KC_DEL,  KC_END,  KC_PGDN,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | CAPSLCK    | Q      | S      | D      | F      | G      | H      | J      | K      | L      | M      | ù%     | *µ     | RETURN      |
            KC_NO,       FR_Q,    KC_S,    KC_D,    KC_F,    KC_G,    KC_H,    KC_J,    KC_K,    KC_L,    FR_M,    FR_UGRV, FR_ASTR, KC_ENT,
        // |--------------------------------------------------------------------------------------------------------------------------------------|           |--------|
        // | LSHIFT   | <> | W      | X      | C      | V      | B      | N      | ,?     | ;.     | :/     | !§     | RSHIFT                     |           | UP     |
            KC_LSFT,FR_LABK,FR_W,    KC_X,    KC_C,    KC_V,    KC_B,    KC_N,    FR_COMM, FR_SCLN, FR_COLN, FR_EXLM, KC_RSFT,                                 KC_UP,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | LCTRL    | LCMD     | LALT     | SPACE                                                   | RALT     | RCMD     | FN       | RCTRL    |  | LFT    | DWN    | RGT    |
            KC_LCTL,   KC_LCMD,   KC_LALT,   KC_SPC,                                                   KC_RALT,   KC_RCMD,   KC_NO,     KC_RCTL,      KC_LEFT, KC_DOWN, KC_RGHT
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|

    ),

    [L_EXT] = LAYOUT_tkl_iso(
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ESC    |        | F1     | F2     | F3     | F4     |    | F5     | F6     | F7     | F8     |   | F9     | F10    | F11    | F12    |  | PSCR   | CORT   | RGB    |
            _______,          _______, _______, _______, _______,      _______, _______, _______, _______,     _______, _______, _______, _______,    _______, _______, TO(L_EXT),
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ^2     | &1     | é2~    | "3#    | '4{    | (5[    | -6|    | è7`    | _8\    | ç9^    | à0@    | )°]    | =+}    | BACKSP          |  | INS    | HOME   | PGUP   |
            TO(L_EXT),_______,_______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,             _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | TAB       | A      | Z      | E      | R      | T      | Y      | U      | I      | O      | P      | ^¨     | $£     | RETURN       |  | DEL    | END    | PGDN   |
            _______,    _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,                   _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | CAPSLCK    | Q      | S      | D      | F      | G      | H      | J      | K      | L      | M      | ù%     | *µ     | RETURN      |
            MO(L_NAV),   _______, _______ /* LT(L_NAV, KC_S) */,
                                           _______, _______, _______, _______, _______, _______, _______, _______, _______, KC_ENT,  _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------|           |--------|
        // | LSHIFT   | <> | W      | X      | C      | V      | B      | N      | ,?     | ;.     | :/     | !§     | RSHIFT                     |           | UP     |
            _______, KC_LSFT /* SFT_T(FR_LABK), SFT_T(FR_LABK) */,
                            _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,                                 _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | LCTRL    | LCMD     | LALT     | SPACE                                                   | RALT     | RCMD     | FN       | RCTRL    |  | LFT    | DWN    | RGT    |
            _______,   _______,   _______ /* ALT_T(FR_UNDS) */,
                                             LT(L_SYM, KC_SPC),                                        _______,   _______,   TT(L_NAV), _______,      _______, _______, _______
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    ),

    [L_SYM] = LAYOUT_tkl_iso(
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ESC    |        | F1     | F2     | F3     | F4     |    | F5     | F6     | F7     | F8     |   | F9     | F10    | F11    | F12    |  | PSCR   | CORT   | RGB    |
            _______,          _______, _______, _______, _______,      _______, _______, _______, _______,     _______, _______, _______, _______,    _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ^2     | &1     | é2~    | "3#    | '4{    | (5[    | -6|    | è7`    | _8\    | ç9^    | à0@    | )°]    | =+}    | BACKSP          |  | INS    | HOME   | PGUP   |
            _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,             _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | TAB       | A      | Z      | E      | R      | T      | Y      | U      | I      | O      | P      | ^¨     | $£     | RETURN       |  | DEL    | END    | PGDN   |
            _______,    FR_LABK, KCC_CBR, KCC_SBR, KCC_BR,  KCC_QTDQ,FR_GRV,  KCC_MNPL,KCC_EQEQ,KCC_MLDV,FR_BSLS, _______, _______,                   _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | CAPSLCK    | Q      | S      | D      | F      | G      | H      | J      | K      | L      | M      | ù%     | *µ     | RETURN      |
            MO(L_NUM),   KC_DCIR, FR_DLR,  FR_AT,   KCC_QTDQ,FR_1,    FR_0,    FR_DOT,  KCC_SLBS,FR_PERC, _______, _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------|           |--------|
        // | LSHIFT   | <> | W      | X      | C      | V      | B      | N      | ,?     | ;.     | :/     | !§     | RSHIFT                     |           | UP     |
            _______,_______,FR_LABK, FR_HASH, FR_TILD, KCC_APPP,FR_RABK, FR_UNDS, FR_UNDS, _______, _______, _______, _______,                                 _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | LCTRL    | LCMD     | LALT     | SPACE                                                   | RALT     | RCMD     | FN       | RCTRL    |  | LFT    | DWN    | RGT    |
            _______,   _______,   _______,   KC_NO,                                                    _______,   _______,   _______,   _______,      _______, _______, _______
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    ),

    [L_NAV] = LAYOUT_tkl_iso(
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ESC    |        | F1     | F2     | F3     | F4     |    | F5     | F6     | F7     | F8     |   | F9     | F10    | F11    | F12    |  | PSCR   | CORT   | RGB    |
            _______,          QK_BOOT, _______, _______, _______,      _______, _______, _______, _______,     _______, _______, _______, _______,    _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ^2     | &1     | é2~    | "3#    | '4{    | (5[    | -6|    | è7`    | _8\    | ç9^    | à0@    | )°]    | =+}    | BACKSP          |  | INS    | HOME   | PGUP   |
            _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,             _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | TAB       | A      | Z      | E      | R      | T      | Y      | U      | I      | O      | P      | ^¨     | $£     | RETURN       |  | DEL    | END    | PGDN   |
            _______,    _______, _______, KC_LSFT, _______, _______, KC_INS,  KC_HOME, KC_UP,   KC_END,  _______, _______, _______,                   _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | CAPSLCK    | Q      | S      | D      | F      | G      | H      | J      | K      | L      | M      | ù%     | *µ     | RETURN      |
            KC_NO,       _______, _______, KC_LCTL, KC_LALT, _______, KC_BSPC, KC_LEFT, KC_DOWN, KC_RGHT, KC_DEL,  _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------|           |--------|
        // | LSHIFT   | <> | W      | X      | C      | V      | B      | N      | ,?     | ;.     | :/     | !§     | RSHIFT                     |           | UP     |
            _______,_______,_______, _______, _______, _______, _______, _______, KC_BSPC, KC_ENT,  KC_DEL,  _______, _______,                                 _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | LCTRL    | LCMD     | LALT     | SPACE                                                   | RALT     | RCMD     | FN       | RCTRL    |  | LFT    | DWN    | RGT    |
            _______,   _______,   _______,   MO(L_NUM),                                                _______,   _______,   _______,   _______,      _______, _______, _______
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    ),

    [L_NUM] = LAYOUT_tkl_iso(
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ESC    |        | F1     | F2     | F3     | F4     |    | F5     | F6     | F7     | F8     |   | F9     | F10    | F11    | F12    |  | PSCR   | CORT   | RGB    |
            _______,          _______, _______, _______, _______,      _______, _______, _______, _______,     _______, _______, _______, _______,    _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | ^2     | &1     | é2~    | "3#    | '4{    | (5[    | -6|    | è7`    | _8\    | ç9^    | à0@    | )°]    | =+}    | BACKSP          |  | INS    | HOME   | PGUP   |
            _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______, _______,             _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | TAB       | A      | Z      | E      | R      | T      | Y      | U      | I      | O      | P      | ^¨     | $£     | RETURN       |  | DEL    | END    | PGDN   |
            _______,    _______, _______, FR_SLSH, FR_ASTR, _______, _______, FR_7,    FR_8,    FR_9,    _______, _______, _______,                   _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | CAPSLCK    | Q      | S      | D      | F      | G      | H      | J      | K      | L      | M      | ù%     | *µ     | RETURN      |
            KC_NO,       _______, _______, FR_MINS, FR_PLUS, _______, _______, FR_4,    FR_5,    FR_6,    _______, _______, _______, _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------|           |--------|
        // | LSHIFT   | <> | W      | X      | C      | V      | B      | N      | ,?     | ;.     | :/     | !§     | RSHIFT                     |           | UP     |
            _______,_______,_______, _______, FR_COLN, FR_EQL,  _______, _______, FR_1,    FR_2,    FR_3,    _______, _______,                                 _______,
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
        // | LCTRL    | LCMD     | LALT     | SPACE                                                   | RALT     | RCMD     | FN       | RCTRL    |  | LFT    | DWN    | RGT    |
            _______,   _______,   _______,   KC_NO,                                                    FR_0,      FR_DOT,    _______,   _______,      _______, _______, _______
        // |--------------------------------------------------------------------------------------------------------------------------------------------------------------------|
    )
};
